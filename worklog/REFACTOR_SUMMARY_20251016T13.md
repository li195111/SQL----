# 工作記錄 - 2025/10/16 13:30

## 📋 任務摘要
為所有 Python 及 Notebook 教學文件添加練習題，並使用 HTML `<details>` 標籤將答案收合。
**重要調整**：確保練習題出現在章節介紹和範例程式碼**之後**，而不是章節標題之後。

## 🔧 修改內容

### 1. 修改的文件
- `2024大數據情境處理介紹_SQL與AI.ipynb` - 新增 2 個練習題
- `2025_pyspark_sql_course.ipynb` - 新增 3 個練習題
- `2025_pyspark_sql_advanced.ipynb` - 新增 3 個練習題

### 2. 練習題放置策略
✅ **正確做法**：在章節的所有範例程式碼執行完畢後添加練習題
- 第一章範例 → 練習題 → 第二章開始
- 確保學員先學習，後練習

❌ **避免做法**：在章節標題後立即出現練習題
- 學員還沒看到範例就要做練習

### 3. 練習題分布

#### 2024大數據情境處理介紹_SQL與AI.ipynb (2個)
1. **Cell 16 之後** - SparkSession 建立與驗證練習
2. **Cell 25 之後** - 學生資料表建立與查詢練習

#### 2025_pyspark_sql_course.ipynb (3個)
1. **Cell 15 之後**（第一章結束）- 商品資料表綜合操作練習（SELECT/INSERT/UPDATE/DELETE/WHERE）
2. **Cell 26 之後**（第二章結束）- 員工管理系統練習（CREATE TABLE/ALTER/統計分析）
3. **Cell 52 之後**（第四章 JOIN 結束）- 訂單分析系統練習（多表 JOIN/聚合查詢）

#### 2025_pyspark_sql_advanced.ipynb (3個)
1. **Cell 17 之後**（Window Functions 章節結束）- 銷售業績分析練習（ROW_NUMBER/LAG/累計/移動平均）
2. **Cell 27 之後**（CTE 章節結束）- RFM 客戶價值分析練習（多層 CTE/客戶分級）
3. **Cell 35 之後**（子查詢優化章節結束）- 查詢優化綜合練習（比較 4 種方法/效能分析）

### 4. 練習題設計特色

#### 綜合性強
- 每個練習題整合該章節所有知識點
- 循序漸進，從基礎到進階

#### 實務導向
- 商品管理系統
- 員工管理系統
- 訂單分析系統
- RFM 客戶價值分析
- 查詢效能優化

#### 完整答案
- 包含詳細程式碼
- 加入註解說明
- 提供多種解法（where適用）
- 輸出結果說明

### 5. 技術實作細節

#### 位置控制
```python
# 使用 cell 索引精確控制練習題位置
exercises_map = {
    15: [exercise1],  # 在 cell 15 之後添加
    26: [exercise2],  # 在 cell 26 之後添加
}
```

#### 格式統一
```markdown
## 💪 練習題 1

**題目：**

[多行題目描述]

**提示：[具體提示]**

<details>
<summary>📝 點擊查看參考答案</summary>

```python
[完整可執行程式碼]
```

</details>

---
```

### 6. 示例練習題

**2025 基礎課程 - 練習題 1**（第一章結束）：
```
題目：請建立一個商品資料表並完成以下操作：
1. 建立包含商品名稱、類別、價格、庫存的 DataFrame
2. 新增 2 個新商品
3. 更新某個商品的價格
4. 刪除庫存為 0 的商品
5. 查詢價格在 500-2000 之間的商品
```

**2025 進階課程 - 練習題 3**（子查詢優化章節）：
```
題目：請完成一個綜合查詢優化練習：
1. 找出銷售額超過部門平均值的員工（用3種方法實現）
2. 比較子查詢、CTE、JOIN 三種方法的執行計畫
3. 使用 broadcast join 優化小表連接
4. 總結效能優化建議
```

## ✅ 驗證結果

### 最終統計
- 2024 SQL與AI: 90 cells, 2 個練習題
- 2025 基礎課程: 172 cells, 3 個練習題
- 2025 進階課程: 85 cells, 3 個練習題
- **總計：8 個高質量練習題**

### 位置驗證
✅ 所有練習題都在章節範例程式碼之後
✅ 練習題與下一章節之間有清楚的分隔
✅ 格式統一，使用 HTML 收合標籤
✅ 答案可執行，包含完整程式碼

## 🎯 教學效果提升

### 學習路徑優化
1. 閱讀章節概念說明
2. 學習範例程式碼
3. 執行範例驗證理解
4. **完成章節練習題**
5. 進入下一章節

### 練習題特色
- 💪 題目整合章節所有知識點
- 🎯 實務場景，貼近真實工作
- 📝 答案收合，鼓勵獨立思考
- ✅ 完整程式碼，方便驗證
- 🚀 難度適中，循序漸進

### 學員收益
- 章節學習後立即鞏固
- 避免還沒學就要練習的困惑
- 實務導向的題目設計
- 完整答案作為參考
- 培養獨立解決問題的能力

## 📝 後續建議

1. 可依據學員反饋調整練習題難度
2. 考慮新增「挑戰題」給進階學員
3. 建立練習題解答影片
4. 收集學員常見錯誤，更新提示內容
